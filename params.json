{
  "name": "Monero Examples",
  "tagline": "compile-monero-09-on-ubuntu-16-04",
  "body": "# Compile Monero 0.9 on Ubuntu 16.04 x64 Final Beta\r\n\r\nThe example shows how to compile the current github version of [Monero](https://getmonero.org/), as of 26 Mar 2015, on [Ubuntu 16.04 x64 Final Beta](https://lists.ubuntu.com/archives/ubuntu-announce/2016-March/000206.html).\r\n\r\n## Dependencies\r\nBefore proceeding with the compilation, the following packages are required:\r\n\r\n```bash\r\n# update Ubuntu's repository\r\nsudo apt update\r\n\r\n#install git to download latest Monero source code from github\r\nsudo apt install git\r\n\r\n# install dependencies to be able to compile Monero\r\nsudo apt install build-essential cmake libboost-all-dev miniupnpc libunbound-dev graphviz doxygen\r\n\r\n# or git and all dependencies in one command\r\n# sudo apt install git build-essential cmake libboost-all-dev miniupnpc libunbound-dev graphviz doxygen\r\n```\r\n\r\n## Compilation\r\n\r\nYou can compile either latest version of the source code, or tagged version.\r\nFor the bleeding edge features, use the latest version. However, this might\r\nbe not stable and buggy. For stable version, compile tagged version of the\r\nsource code, e.g., v0.9.4.\r\n\r\n### Latest version of the source code\r\nHaving the dependencies, we can download the current github Monero version and compile it as follows:\r\n\r\n```bash\r\n# download the latest bitmonero source code from github\r\ngit clone https://github.com/monero-project/bitmonero.git\r\n\r\n# go into bitmonero folder\r\ncd bitmonero/\r\n\r\n# compile\r\nmake # or make -j number_of_threads, e.g., make -j 2\r\n\r\n# alternatively `make release` can be used instead of `make`. This compiles\r\n# the source code without compiling unique tests which is faster, and can\r\n# avid problems if there are compilation errors with compiling the tests\r\n```\r\n\r\nPlease not that this is a current version of Monero on github, **not the official and stable\r\nrelease**. Thus, as the development of Monero continues virtually on daily basis, sometimes\r\nthings can break, including the compilation procedure provided.\r\nTo avoid this, please use the source code and binary files of the official and stable release of\r\nMonero which can be found [here](https://github.com/monero-project/bitmonero/releases/latest).\r\n\r\n### Stable tagged version\r\nThe latest version of the source code can contain many bugs, as its not yet\r\nofficially released. Thus, one can compile official tagged version, e.g., **0.9.4**:\r\n\r\n```bash\r\n# download the latest bitmonero source code from github\r\ngit clone https://github.com/monero-project/bitmonero.git\r\n\r\n# go into bitmonero folder\r\ncd bitmonero/\r\n\r\n# list all tags\r\ngit tag\r\n\r\n# select which version to checkout.\r\n# For example, to checkout tag v0.9.4\r\ngit checkout -b v0.9.4\r\n\r\n# compile\r\nmake # or make -j number_of_threads, e.g., make -j 2\r\n\r\n# alternatively `make release` can be used instead of `make`. This compiles\r\n# the source code without compiling unique tests which is faster, and can\r\n# avid problems if there are compilation errors with compiling the tests\r\n```\r\n\r\n\r\n\r\n## Installation\r\nAfter successful compilation, the Monero binaries should be located in `./build/release/bin` as shown below:\r\n\r\n```bash\r\n./build/release/bin/\r\n├── bitmonerod\r\n├── blockchain_converter\r\n├── blockchain_dump\r\n├── blockchain_export\r\n├── blockchain_import\r\n├── cn_deserialize\r\n├── connectivity_tool\r\n├── simpleminer\r\n└── simplewallet\r\n```\r\n\r\nI usually move the binaries into `/opt/bitmonero/` folder. This can be done as follows:\r\n\r\n```bash\r\n# optional\r\nsudo mkdir -p /opt/bitmonero\r\nsudo mv -v ./build/release/bin/* /opt/bitmonero/\r\n```\r\n\r\nThis should result in:\r\n```bash\r\n/opt/bitmonero\r\n├── bitmonerod\r\n├── blockchain_converter\r\n├── blockchain_dump\r\n├── blockchain_export\r\n├── blockchain_import\r\n├── cn_deserialize\r\n├── connectivity_tool\r\n├── simpleminer\r\n└── simplewallet\r\n```\r\n\r\nNow we can start the Monero daemon, i.e., `bitmonerod`, and let it\r\ndownload the blockchain and synchronize itself with the Monero network. After that, you can run your the `simplewallet`.\r\n\r\n```bash\r\n# launch the Monero daemon and let it synchronize with the Monero network\r\n/opt/bitmonero/bitmonerod\r\n\r\n# launch the Monero wallet\r\n/opt/bitmonero/simplewallet\r\n```\r\n\r\n## Useful aliases (with rlwrap)\r\n`bitmonerod` and `simplewallet` do not have tab-compliton nor history.\r\nThis problem can be overcome using [rlwrap](https://github.com/hanslub42/rlwrap).\r\n\r\n```bash\r\n# install rlwrap\r\nsudo apt install rlwrap\r\n\r\n# download bitmonerod and simplewallet commands files\r\nwget -O ~/.bitmonero/monerocommands_bitmonerod.txt https://raw.githubusercontent.com/moneroexamples/compile-monero-09-on-xubuntu-16-04-beta-1/master/monerocommands_bitmonerod.txt\r\nwget -O ~/.bitmonero/monerocommands_simplewallet.txt https://raw.githubusercontent.com/moneroexamples/compile-monero-09-on-xubuntu-16-04-beta-1/master/monerocommands_simplewallet.txt\r\n\r\n# add aliases to .bashrc\r\necho \"alias moneronode='rlwrap -f ~/.bitmonero/monerocommands_simplewallet.txt /opt/bitmonero/bitmonerod'\" >> ~/.bashrc\r\necho \"alias monerowallet='rlwrap -f ~/.bitmonero/monerocommands_bitmonerod.txt /opt/bitmonero/simplewallet'\" >> ~/.bashrc\r\n\r\n# reload .bashrc\r\nsource ~/.bashrc\r\n```\r\n\r\nWith this, we can just start the daemon and wallet simply using\r\n`moneronode` and `monerowallet` commands. `rlwrap` will provide\r\ntab-complition and history for the monero programs.\r\n\r\n## Example screenshot\r\n\r\n![Ubuntu Screeshot](https://raw.githubusercontent.com/moneroexamples/compile-monero-09-on-ubuntu-16-04/master/imgs/ubuntu_screen.jpg)\r\n\r\n\r\n## Monero C++11 development (optional)\r\nIf you want to develop your own C++11 programs on top of Monero 0.9,\r\nMonero's static libraries and headers will be needed. Below is shown\r\nhow they can be setup for use to write your own C++11 programs based\r\non Monero. An example of such a program is  [access-blockchain-in-cpp](https://github.com/moneroexamples/access-blockchain-in-cpp).\r\n\r\n\r\n### Monero static libraries\r\n\r\nWhen the compilation finishes, a number of static Monero libraries\r\nshould be generated. We will need them to link against in our C++11 programs.\r\n\r\nSince they are spread out over different subfolders of the `./build/` folder, it is easier to just copy them into one folder. I assume that\r\n `/opt/bitmonero-dev/libs` is the folder where they are going to be copied to.\r\n\r\n```bash\r\n# create the folder\r\nsudo mkdir -p /opt/bitmonero-dev/libs\r\n\r\n# find the static libraries files (i.e., those with extension of *.a)\r\n# and copy them to /opt/bitmonero-dev/libs\r\n# assuming you are still in bitmonero/ folder which you downloaded from\r\n# github\r\nsudo find ./build/ -name '*.a' -exec cp -v {} /opt/bitmonero-dev/libs  \\;\r\n```\r\n\r\n This should results in the following file structure:\r\n\r\n ```bash\r\n/opt/bitmonero-dev/\r\n└── libs\r\n    ├── libblockchain_db.a\r\n    ├── libblocks.a\r\n    ├── libcommon.a\r\n    ├── libcrypto.a\r\n    ├── libcryptonote_core.a\r\n    ├── libcryptonote_protocol.a\r\n    ├── libdaemonizer.a\r\n    ├── libgtest.a\r\n    ├── libgtest_main.a\r\n    ├── liblmdb.a\r\n    ├── libminiupnpc.a\r\n    ├── libmnemonics.a\r\n    ├── libotshell_utils.a\r\n    ├── libp2p.a\r\n    ├── librpc.a\r\n    └── libwallet.a\r\n```\r\n\r\n### Monero headers\r\n\r\nNow we need to get Monero headers, as this is our interface to the\r\nMonero libraries. Folder `/opt/bitmonero-dev/headers` is assumed\r\nto hold the headers.\r\n\r\n```bash\r\n# create the folder\r\nsudo mkdir -p /opt/bitmonero-dev/headers\r\n\r\n# find the header files (i.e., those with extension of *.h)\r\n# and copy them to /opt/bitmonero-dev/headers.\r\n# but this time the structure of directories is important\r\n# so rsync is used to find and copy the headers files\r\nsudo rsync -zarv --include=\"*/\" --include=\"*.h\" --exclude=\"*\" --prune-empty-dirs ./ /opt/bitmonero-dev/headers\r\n```\r\n\r\nThis should results in the following file structure:\r\n\r\n```bash\r\n# only src/ folder with up to 3 level nesting is shown\r\n\r\n/opt/bitmonero-dev/headers/src/\r\n├── blockchain_db\r\n│   ├── berkeleydb\r\n│   │   └── db_bdb.h\r\n│   ├── blockchain_db.h\r\n│   ├── db_types.h\r\n│   └── lmdb\r\n│       └── db_lmdb.h\r\n├── blockchain_utilities\r\n│   ├── blockchain_utilities.h\r\n│   ├── blocksdat_file.h\r\n│   ├── bootstrap_file.h\r\n│   ├── bootstrap_serialization.h\r\n│   └── fake_core.h\r\n├── blocks\r\n│   └── blocks.h\r\n├── common\r\n│   ├── base58.h\r\n│   ├── boost_serialization_helper.h\r\n│   ├── command_line.h\r\n│   ├── dns_utils.h\r\n│   ├── http_connection.h\r\n│   ├── i18n.h\r\n│   ├── int-util.h\r\n│   ├── pod-class.h\r\n│   ├── rpc_client.h\r\n│   ├── scoped_message_writer.h\r\n│   ├── unordered_containers_boost_serialization.h\r\n│   ├── util.h\r\n│   └── varint.h\r\n# ... the rest not shown to save some space\r\n```\r\n\r\n## Shortcut\r\nThe above steps (except `rlwrap` setup) where composed into one script: [`monero_ubuntu_compiler.sh`](https://github.com/moneroexamples/compile-monero-09-on-ubuntu-16-04/blob/master/monero_ubuntu_compiler.sh).\r\n\r\nThe scripts requires root access and **deletes ./bitmonero, /opt/bitmonero and /opt/bitmonero-dev folders** if exist\r\nprior to installation. So use it with **caution**!!!\r\n\r\nTo download and execute this script:\r\n\r\n```bash\r\nsudo su -c \"wget https://raw.githubusercontent.com/moneroexamples/compile-monero-09-on-ubuntu-16-04/master/monero_ubuntu_compiler.sh && chmod +x monero_ubuntu_compiler.sh && ./monero_ubuntu_compiler.sh\"\r\n```\r\n\r\n## Other examples\r\nOther examples can be found on  [github](https://github.com/moneroexamples?tab=repositories).\r\nPlease know that some of the examples/repositories are not\r\nfinished and may not work as intended.\r\n\r\n## How can you help?\r\n\r\nConstructive criticism, code and website edits are always good. They can be made through github.\r\n\r\nSome Monero are also welcome:\r\n```\r\n48daf1rG3hE1Txapcsxh6WXNe9MLNKtu7W7tKTivtSoVLHErYzvdcpea2nSTgGkz66RFP4GKVAsTV14v6G3oddBTHfxP6tU\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}